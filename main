import pygame
import sys
import time

path = "Moje soubory/Soubory systému Linux/Seterra/"

def scaling(image, af_proportions, pomer, velikost):
    
    if af_proportions > pomer: 
        imagee = pygame.transform.scale(image, (velikost[0], velikost[0]/af_proportions))

    elif af_proportions == pomer:
        imagee = pygame.transform.scale(image, (velikost[0], velikost[1]))

    else:
        imagee = pygame.transform.scale(image, (velikost[1]*af_proportions, velikost[1])) 

    return imagee

# Initialize pygame
pygame.init()

velikost = [1000, 800] #delka obrazovky, výška obrazovky
pomer = velikost[0] / velikost[1]
# Set up the display
screen = pygame.display.set_mode((velikost[0], velikost[1]))  # Screen size: 800x600
pygame.display.set_caption('sigma doppler')

continents = []
continents_prop = []
continents_name = ["South-america.svg", "North-america.svg", "Oceania.png", "Asia.png", "Europe.jpeg", "Africa.svg"]
# Load the image (make sure the image is in the same folder as the script or provide the full path)
pathh = f"{path}continents/"
for i in range(len(continents_name)):
    continents.append(pygame.image.load(f'{pathh}{continents_name[i]}').convert_alpha()) 
    continents_prop.append(continents[i].get_width() / continents[i].get_height())
    continents[i]=scaling(continents[i], continents_prop[i], pomer, velikost)

game_state = 1 
#1 - kontinety, výběr státu
#2 - vlajky - výběr vlajky státu
#3 - provincie státu (jen u vybraných)
#4 - vlajky provincií (jen u vybraných)
#5 - města
country = 0 #aktuálně hádaná země

displayed_continent = 0
# Main game loop
running = True
while running:
    # Handle events
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        
        if event.type == pygame.KEYDOWN:
            if game_state == 1:
                if event.key == pygame.K_LEFT: displayed_continent -= 1
                if event.key == pygame.K_RIGHT: displayed_continent += 1
                displayed_continent = displayed_continent % 6

    time_stamp = time.time()

    # Normalize timeee to fit within the 0-255 range for colors
    color_value = int(abs(((time_stamp*10) % 510)-255))  # Wrap around the time value to stay within range

    # Fill the screen with a color (optional)
    screen.fill((200, 255, color_value))  # White background with time-dependent blue channel

    # Display the image at a specified position (x=0, y=100 for top-left corner)
    if game_state == 1:
        image_rect = continents[displayed_continent].get_rect()
        image_rect.center = (velikost[0]/2,velikost[1]/2)
        screen.blit(continents[displayed_continent], (0, 0))

    # Update the screen
    pygame.display.flip()

# Quit pygame
pygame.quit()
sys.exit()
